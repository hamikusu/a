<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚¢ãƒ¼ãƒˆç”Ÿæˆã‚²ãƒ¼ãƒ  - æ”¾å°„çŠ¶ãƒŸãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰</title>
  <style>
    body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; font-family: Arial, sans-serif; background-color: #f0f0f0; }
    h1 { margin-bottom: 10px; }
    #controlPanel { margin-bottom: 20px; }
    #canvas { width: 500px; height: 500px; background-color: #ffffff; border: 2px solid #333; position: relative; overflow: hidden; cursor: pointer; }
    .emoji { position: absolute; font-size: var(--size); pointer-events: none; }
  </style>
</head>
<body>
  <h1>ã‚¢ãƒ¼ãƒˆç”Ÿæˆã‚²ãƒ¼ãƒ  - æ”¾å°„çŠ¶ãƒŸãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰</h1>
  <div id="controlPanel">
    <label>èƒŒæ™¯è‰²: 
      <input type="color" id="bgColorPicker" value="#ffffff">
    </label>
    <label>ã‚µã‚¤ã‚º: 
      <input type="range" id="sizeSlider" min="10" max="100" value="30">
    </label>
    <label>çµµæ–‡å­—é¸æŠ: 
      <select id="emojiPicker">
        <option value="ğŸŒ¸">ğŸŒ¸</option>
        <option value="ğŸŒˆ">ğŸŒˆ</option>
        <option value="â­">â­</option>
        <option value="ğŸ’">ğŸ’</option>
        <option value="ğŸ¦‹">ğŸ¦‹</option>
      </select>
    </label>
    <button id="clearButton">ã‚¯ãƒªã‚¢</button>
  </div>
  <div id="canvas"></div>

  <script>
    const canvas = document.getElementById('canvas');
    const bgColorPicker = document.getElementById('bgColorPicker');
    const sizeSlider = document.getElementById('sizeSlider');
    const emojiPicker = document.getElementById('emojiPicker');
    const clearButton = document.getElementById('clearButton');
    const mirrorCount = 8; // æ”¾å°„çŠ¶ã®ã‚³ãƒ”ãƒ¼æ•°
    const distance = 80; // ä¸­å¿ƒã‹ã‚‰ã®è·é›¢

    // èƒŒæ™¯è‰²ã®è¨­å®š
    bgColorPicker.addEventListener('input', () => {
      canvas.style.backgroundColor = bgColorPicker.value;
    });

    // ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ã®å‹•ä½œ
    clearButton.addEventListener('click', () => {
      canvas.innerHTML = ''; // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢
    });

    // æ”¾å°„çŠ¶ã«çµµæ–‡å­—ã‚’é…ç½®
    canvas.addEventListener('click', (event) => {
      for (let i = 0; i < mirrorCount; i++) {
        const angle = (360 / mirrorCount) * i; // å„çµµæ–‡å­—ã®é…ç½®è§’åº¦
        const x = event.offsetX + distance * Math.cos(angle * Math.PI / 180) - sizeSlider.value / 2;
        const y = event.offsetY + distance * Math.sin(angle * Math.PI / 180) - sizeSlider.value / 2;
        
        const emoji = document.createElement('div');
        emoji.className = 'emoji';
        emoji.style.setProperty('--size', `${sizeSlider.value}px`);
        emoji.style.left = `${x}px`;
        emoji.style.top = `${y}px`;
        emoji.style.fontSize = `${sizeSlider.value}px`;
        emoji.innerText = emojiPicker.value;
        emoji.style.color = getRandomColor();

        canvas.appendChild(emoji);
      }
    });

    // ãƒ©ãƒ³ãƒ€ãƒ ãªè‰²ã‚’ç”Ÿæˆ
    function getRandomColor() {
      const letters = '0123456789ABCDEF';
      let color = '#';
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }
  </script>
</body>
</html>
