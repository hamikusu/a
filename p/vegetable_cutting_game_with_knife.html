<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡èœåˆ‡ã‚Šãƒãƒ£ãƒ¬ãƒ³ã‚¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f3f3f3;
            margin: 0;
            padding: 0;
        }
        #game-container {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        #vegetable {
            font-size: 100px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        #score, #timer {
            font-size: 24px;
            margin: 10px;
        }
        #knife {
            font-size: 60px;
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            transition: top 0.1s;
        }
        #vegetable-selection {
            margin-top: 20px;
        }
        .vegetable-option {
            font-size: 40px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <!-- é‡èœé¸æŠç”»é¢ -->
    <div id="selection-container">
        <h1>é‡èœã‚’é¸ã‚“ã§ãã ã•ã„</h1>
        <div id="vegetable-selection"></div>
        <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>

    <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
    <div id="game-container">
        <div id="score">ã‚¹ã‚³ã‚¢: 0</div>
        <div id="timer">æ®‹ã‚Šæ™‚é–“: 15ç§’</div>
        <div id="vegetable">ğŸ¥’</div>
        <div id="knife">ğŸ”ª</div>
    </div>

    <script>
        const vegetableSelectionContainer = document.getElementById('selection-container');
        const gameContainer = document.getElementById('game-container');
        const vegetableElement = document.getElementById('vegetable');
        const knife = document.getElementById('knife');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const vegetableSelection = document.getElementById('vegetable-selection');

        const vegetables = ["ğŸ¥‘", "ğŸ†", "ğŸ¥”", "ğŸ¥•", "ğŸŒ½", "ğŸ¥’", "ğŸŒ¶ï¸", "ğŸ¥¦", "ğŸ§„", "ğŸ¥¬", "ğŸ§…", "ğŸ„", "ğŸ¥œ", "ğŸ«˜", "ğŸŒ°", "ğŸ«‘"];
        let selectedVegetable = "ğŸ¥’";
        let score = 0;
        let timeLeft = 15;
        let gameInterval;

        // é‡èœé¸æŠãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
        vegetables.forEach(veg => {
            const vegButton = document.createElement('span');
            vegButton.textContent = veg;
            vegButton.className = 'vegetable-option';
            vegButton.onclick = () => selectVegetable(veg);
            vegetableSelection.appendChild(vegButton);
        });

        // é‡èœã‚’é¸æŠ
        function selectVegetable(veg) {
            selectedVegetable = veg;
            document.querySelectorAll('.vegetable-option').forEach(el => {
                el.style.border = '';
            });
            event.target.style.border = '2px solid green';
        }

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        function startGame() {
            if (!selectedVegetable) {
                alert("é‡èœã‚’é¸ã‚“ã§ãã ã•ã„ï¼");
                return;
            }
            vegetableSelectionContainer.style.display = 'none';
            gameContainer.style.display = 'flex';

            score = 0;
            timeLeft = 15;
            scoreDisplay.textContent = `ã‚¹ã‚³ã‚¢: ${score}`;
            timerDisplay.textContent = `æ®‹ã‚Šæ™‚é–“: ${timeLeft}ç§’`;
            vegetableElement.textContent = selectedVegetable;

            gameInterval = setInterval(updateTimer, 1000);
        }

        // ã‚¿ã‚¤ãƒãƒ¼ã®æ›´æ–°
        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = `æ®‹ã‚Šæ™‚é–“: ${timeLeft}ç§’`;
            if (timeLeft <= 0) {
                endGame();
            }
        }

        // ã‚²ãƒ¼ãƒ çµ‚äº†
        function endGame() {
            clearInterval(gameInterval);
            vegetableElement.removeEventListener('click', cutVegetable);
            alert(`æ™‚é–“åˆ‡ã‚Œï¼ã‚ãªãŸã®ã‚¹ã‚³ã‚¢: ${score}`);
            location.reload(); // ã‚²ãƒ¼ãƒ çµ‚äº†å¾Œã«ãƒªãƒ­ãƒ¼ãƒ‰
        }

        // é‡èœã‚’åˆ‡ã‚‹
        vegetableElement.addEventListener('click', cutVegetable);

        function cutVegetable() {
            if (timeLeft > 0) {
                score++;
                scoreDisplay.textContent = `ã‚¹ã‚³ã‚¢: ${score}`;

                // åŒ…ä¸ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                knife.style.top = '50px';
                setTimeout(() => knife.style.top = '-100px', 100);

                // åˆ‡ã£ãŸã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                vegetableElement.style.transform = 'scale(0.9)';
                setTimeout(() => vegetableElement.style.transform = 'scale(1)', 100);
            }
        }
    </script>
</body>
</html>
